<UserControl x:Class="GGHardware.Views.ClientesView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
             mc:Ignorable="d"
             Background="{DynamicResource Background}">

    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- Encabezado -->
        <StackPanel Orientation="Horizontal" VerticalAlignment="Center" Margin="0,0,0,20">
      
            <TextBlock Text="Gestión de Clientes"
                       FontSize="24"
                       FontWeight="SemiBold"
                       Foreground="{DynamicResource TextPrimary}"
                       VerticalAlignment="Center"
                       Margin="10,0,0,0"/>
        </StackPanel>

        <!-- Formulario -->
        <Border Grid.Row="1"
                Background="{DynamicResource Surface}"
                Padding="20"
                Margin="0,0,0,20"
                CornerRadius="8"
                BorderBrush="{DynamicResource PrimaryBrush}"
                BorderThickness="1">
            <Border.Effect>
                <DropShadowEffect Color="Black" Direction="270" ShadowDepth="2" Opacity="0.1" BlurRadius="8"/>
            </Border.Effect>
            <StackPanel>
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>

                    <!-- Fila 1 -->
                    <TextBlock Grid.Row="0" Grid.Column="0" 
                               Text="Nombre:" 
                               VerticalAlignment="Center" 
                               FontWeight="SemiBold" 
                               Margin="0,0,10,10"
                               Foreground="{DynamicResource TextPrimary}"
                               />
                    <TextBox x:Name="txtNombre" 
                             Grid.Row="0" Grid.Column="1" 
                             Margin="0,0,20,10" TabIndex="0"
                             materialDesign:HintAssist.Hint="Nombre" 
                             PreviewTextInput="txtLetras_PreviewTextInput"
                             Background="{DynamicResource Surface}"
                             Foreground="{DynamicResource TextPrimary}"
                             BorderBrush="{DynamicResource PrimaryBrush}"/>

                    <TextBlock Grid.Row="0" Grid.Column="2" 
                               Text="Apellido:" 
                               VerticalAlignment="Center" 
                               FontWeight="SemiBold" 
                               Margin="0,0,10,10"
                               Foreground="{DynamicResource TextPrimary}"/>
                    <TextBox x:Name="txtApellido" 
                             Grid.Row="0" Grid.Column="3" 
                             Margin="0,0,0,10" TabIndex="1"
                             materialDesign:HintAssist.Hint="Apellido" 
                             PreviewTextInput="txtLetras_PreviewTextInput"
                             Background="{DynamicResource Surface}"
                             Foreground="{DynamicResource TextPrimary}"
                             BorderBrush="{DynamicResource PrimaryBrush}"/>

                    <!-- Fila 2 -->
                    <TextBlock Grid.Row="1" Grid.Column="0" 
                               Text="CUIT:" 
                               VerticalAlignment="Center" 
                               FontWeight="SemiBold" 
                               Margin="0,0,10,10"
                               Foreground="{DynamicResource TextPrimary}"/>
                    <TextBox x:Name="txtCUIT" 
                             Grid.Row="1" Grid.Column="1" TabIndex="2"
                             Margin="0,0,20,10" 
                             materialDesign:HintAssist.Hint="CUIT" 
                             PreviewTextInput="txtNumeros_PreviewTextInput"
                             Background="{DynamicResource Surface}"
                             Foreground="{DynamicResource TextPrimary}"
                             BorderBrush="{DynamicResource PrimaryBrush}"/>

                    <TextBlock Grid.Row="1" Grid.Column="2" 
                               Text="Teléfono:" 
                               VerticalAlignment="Center" 
                               FontWeight="SemiBold" 
                               Margin="0,0,10,10"
                               Foreground="{DynamicResource TextPrimary}"/>
                    <TextBox x:Name="txtTelefono" 
                             Grid.Row="1" Grid.Column="3" TabIndex="3"
                             Margin="0,0,0,10" 
                             materialDesign:HintAssist.Hint="Teléfono" 
                             PreviewTextInput="txtNumeros_PreviewTextInput"
                             Background="{DynamicResource Surface}"
                             Foreground="{DynamicResource TextPrimary}"
                             BorderBrush="{DynamicResource PrimaryBrush}"/>

                    <!-- Fila 3 -->
                    <TextBlock Grid.Row="2" Grid.Column="0" 
                               Text="Dirección:" 
                               VerticalAlignment="Center" 
                               FontWeight="SemiBold" 
                               Margin="0,0,10,10"
                               Foreground="{DynamicResource TextPrimary}"/>
                    <TextBox x:Name="txtDireccion" 
                             Grid.Row="2" Grid.Column="1" TabIndex="4"
                             Margin="0,0,20,10" 
                             materialDesign:HintAssist.Hint="Dirección"
                             Background="{DynamicResource Surface}"
                             Foreground="{DynamicResource TextPrimary}"
                             BorderBrush="{DynamicResource PrimaryBrush}"/>

                    <TextBlock Grid.Row="2" Grid.Column="2" 
                               Text="Condición Fiscal:" 
                               VerticalAlignment="Center" 
                               FontWeight="SemiBold" 
                               Margin="0,0,10,10"
                               Foreground="{DynamicResource TextPrimary}"/>
                    <ComboBox x:Name="cmbCondicionFiscal" 
                              Grid.Row="2" Grid.Column="3" TabIndex="5"
                              Margin="0,0,0,10"
                              Background="{DynamicResource Surface}"
                              Foreground="{DynamicResource TextPrimary}"
                              BorderBrush="{DynamicResource PrimaryBrush}">
                        <ComboBoxItem Content="Responsable Inscripto"/>
                        <ComboBoxItem Content="Monotributista"/>
                        <ComboBoxItem Content="Exento"/>
                        <ComboBoxItem Content="Consumidor Final"/>
                    </ComboBox>

                    <!-- Fila 4 -->
                    <TextBlock Grid.Row="3" Grid.Column="0" 
                               Text="Provincia:" 
                               VerticalAlignment="Center" 
                               FontWeight="SemiBold" 
                               Margin="0,0,10,10"
                               Foreground="{DynamicResource TextPrimary}"/>
                    <TextBox x:Name="txtProvincia" 
                             Grid.Row="3" Grid.Column="1" TabIndex="6"
                             Margin="0,0,20,10" 
                             materialDesign:HintAssist.Hint="Provincia" 
                             PreviewTextInput="txtLetras_PreviewTextInput"
                             Background="{DynamicResource Surface}"
                             Foreground="{DynamicResource TextPrimary}"
                             BorderBrush="{DynamicResource PrimaryBrush}"/>

                    <TextBlock Grid.Row="3" Grid.Column="2" 
                               Text="Localidad:" 
                               VerticalAlignment="Center" 
                               FontWeight="SemiBold" 
                               Margin="0,0,10,10"
                               Foreground="{DynamicResource TextPrimary}"/>
                    <TextBox x:Name="txtLocalidad" 
                             Grid.Row="3" Grid.Column="3" TabIndex="7"
                             Margin="0,0,0,10" 
                             materialDesign:HintAssist.Hint="Localidad" 
                             PreviewTextInput="txtLetras_PreviewTextInput"
                             Background="{DynamicResource Surface}"
                             Foreground="{DynamicResource TextPrimary}"
                             BorderBrush="{DynamicResource PrimaryBrush}"/>

                    <!-- Fila 5 - Email -->
                    <TextBlock Grid.Row="4" Grid.Column="0" 
                               Text="Email:" 
                               VerticalAlignment="Center" 
                               FontWeight="SemiBold" 
                               Margin="0,0,10,10"
                               Foreground="{DynamicResource TextPrimary}"/>
                    <TextBox x:Name="txtEmail" 
                             Grid.Row="4" Grid.Column="1" TabIndex="8"
                             Grid.ColumnSpan="3"
                             Margin="0,0,0,10" 
                             materialDesign:HintAssist.Hint="ejemplo@correo.com"
                             Background="{DynamicResource Surface}"
                             Foreground="{DynamicResource TextPrimary}"
                             BorderBrush="{DynamicResource PrimaryBrush}"/>
                </Grid>

                <!-- Botones -->
                <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,10,0,0">
                    <Button x:Name="btnLimpiar" Content="Limpiar" TabIndex="9" 
                            Click="btnLimpiar_Click" 
                            Margin="0,0,10,0"
                            Background="Transparent"
                            Foreground="{DynamicResource TextPrimary}"
                            BorderBrush="{DynamicResource PrimaryBrush}"
                            BorderThickness="1"
                            Padding="15,8"
                            FontWeight="Medium"
                            Cursor="Hand">
                        <Button.Style>
                            <Style TargetType="Button">
                                <Setter Property="Template">
                                    <Setter.Value>
                                        <ControlTemplate TargetType="Button">
                                            <Border Background="{TemplateBinding Background}"
                                                    BorderBrush="{TemplateBinding BorderBrush}"
                                                    BorderThickness="{TemplateBinding BorderThickness}"
                                                    CornerRadius="4"
                                                    Padding="{TemplateBinding Padding}">
                                                <ContentPresenter HorizontalAlignment="Center"
                                                                VerticalAlignment="Center"/>
                                            </Border>
                                            <ControlTemplate.Triggers>
                                                <Trigger Property="IsMouseOver" Value="True">
                                                    <Setter Property="Background" Value="{DynamicResource PrimaryBrush}"/>
                                                    <Setter Property="Foreground" Value="{DynamicResource PrimaryForegroundBrush}"/>
                                                </Trigger>
                                            </ControlTemplate.Triggers>
                                        </ControlTemplate>
                                    </Setter.Value>
                                </Setter>
                            </Style>
                        </Button.Style>
                    </Button>
                    <Button Content="Guardar Cliente" TabIndex="10"
                            Click="btnGuardar_Click" 
                            Background="{DynamicResource PrimaryBrush}"
                            Foreground="{DynamicResource PrimaryForegroundBrush}"
                            BorderThickness="0"
                            Padding="15,8"
                            FontWeight="Medium"
                            Cursor="Hand">
                        <Button.Style>
                            <Style TargetType="Button">
                                <Setter Property="Template">
                                    <Setter.Value>
                                        <ControlTemplate TargetType="Button">
                                            <Border Background="{TemplateBinding Background}"
                                                    CornerRadius="4"
                                                    Padding="{TemplateBinding Padding}">
                                                <ContentPresenter HorizontalAlignment="Center"
                                                                VerticalAlignment="Center"/>
                                            </Border>
                                            <ControlTemplate.Triggers>
                                                <Trigger Property="IsMouseOver" Value="True">
                                                    <Setter Property="Opacity" Value="0.8"/>
                                                </Trigger>
                                            </ControlTemplate.Triggers>
                                        </ControlTemplate>
                                    </Setter.Value>
                                </Setter>
                            </Style>
                        </Button.Style>
                    </Button>
                </StackPanel>
            </StackPanel>
        </Border>

        <!-- DataGrid -->
        <Border Grid.Row="2"
                Background="{DynamicResource Surface}"
                Padding="10"
                CornerRadius="8"
                BorderBrush="{DynamicResource PrimaryBrush}"
                BorderThickness="1">
            <Border.Effect>
                <DropShadowEffect Color="Black" Direction="270" ShadowDepth="2" Opacity="0.1" BlurRadius="8"/>
            </Border.Effect>
            <DataGrid x:Name="dgClientes"
                      AutoGenerateColumns="False"
                      IsReadOnly="True"
                      HeadersVisibility="Column"
                      GridLinesVisibility="Horizontal"
                      Background="{DynamicResource Surface}"
                      Foreground="{DynamicResource TextPrimary}"
                      BorderThickness="0"
                      RowBackground="{DynamicResource Surface}"
                      AlternatingRowBackground="{DynamicResource Background}"
                      HorizontalGridLinesBrush="{DynamicResource TextSecondary}"
                      SelectionChanged="dgClientes_SelectionChanged"
                      HorizontalAlignment="Left">

                <!-- Estilo para las cabeceras -->
                <DataGrid.ColumnHeaderStyle>
                    <Style TargetType="DataGridColumnHeader">
                        <Setter Property="Background" Value="{DynamicResource PrimaryBrush}"/>
                        <Setter Property="Foreground" Value="{DynamicResource PrimaryForegroundBrush}"/>
                        <Setter Property="FontWeight" Value="SemiBold"/>
                        <Setter Property="Padding" Value="12,8"/>
                        <Setter Property="BorderThickness" Value="0,0,1,0"/>
                        <Setter Property="BorderBrush" Value="{DynamicResource PrimaryForegroundBrush}"/>
                        <Setter Property="HorizontalContentAlignment" Value="Left"/>
                    </Style>
                </DataGrid.ColumnHeaderStyle>

                <!-- Estilo para las celdas -->
                <DataGrid.CellStyle>
                    <Style TargetType="DataGridCell">
                        <Setter Property="BorderThickness" Value="0"/>
                        <Setter Property="Padding" Value="12,8"/>
                        <Setter Property="VerticalAlignment" Value="Center"/>
                        <Style.Triggers>
                            <Trigger Property="IsSelected" Value="True">
                                <Setter Property="Background" Value="{DynamicResource PrimaryBrush}"/>
                                <Setter Property="Foreground" Value="{DynamicResource PrimaryForegroundBrush}"/>
                            </Trigger>
                        </Style.Triggers>
                    </Style>
                </DataGrid.CellStyle>

                <!-- Estilo para las filas -->
                <DataGrid.RowStyle>
                    <Style TargetType="DataGridRow">
                        <Style.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="{DynamicResource PrimaryBrush}"/>
                                <Setter Property="Foreground" Value="{DynamicResource PrimaryForegroundBrush}"/>
                            </Trigger>
                        </Style.Triggers>
                    </Style>
                </DataGrid.RowStyle>

                <DataGrid.Columns>
                    <DataGridTextColumn Header="ID" Binding="{Binding id_cliente}" Width="60"/>
                    <DataGridTextColumn Header="Nombre" Binding="{Binding nombre}" Width="180"/>
                    <DataGridTextColumn Header="Apellido" Binding="{Binding apellido}" Width="180"/>
                    <DataGridTextColumn Header="CUIT" Binding="{Binding cuit}" Width="150"/>
                    <DataGridTextColumn Header="Condición Fiscal" Binding="{Binding condicion_fiscal}" Width="180"/>

                    <!-- Columna de Estado -->
                    <DataGridTemplateColumn Header="Estado" Width="100">
                        <DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                                    <Ellipse Width="10" Height="10" VerticalAlignment="Center" Margin="0,0,5,0">
                                        <Ellipse.Style>
                                            <Style TargetType="Ellipse">
                                                <Style.Triggers>
                                                    <DataTrigger Binding="{Binding Activo}" Value="True">
                                                        <Setter Property="Fill" Value="#4CAF50"/>
                                                    </DataTrigger>
                                                    <DataTrigger Binding="{Binding Activo}" Value="False">
                                                        <Setter Property="Fill" Value="#F44336"/>
                                                    </DataTrigger>
                                                </Style.Triggers>
                                            </Style>
                                        </Ellipse.Style>
                                    </Ellipse>
                                    <TextBlock VerticalAlignment="Center">
                                        <TextBlock.Style>
                                            <Style TargetType="TextBlock">
                                                <Setter Property="FontWeight" Value="SemiBold"/>
                                                <Style.Triggers>
                                                    <DataTrigger Binding="{Binding Activo}" Value="True">
                                                        <Setter Property="Text" Value="Activo"/>
                                                        <Setter Property="Foreground" Value="#4CAF50"/>
                                                    </DataTrigger>
                                                    <DataTrigger Binding="{Binding Activo}" Value="False">
                                                        <Setter Property="Text" Value="Inactivo"/>
                                                        <Setter Property="Foreground" Value="#F44336"/>
                                                    </DataTrigger>
                                                </Style.Triggers>
                                            </Style>
                                        </TextBlock.Style>
                                    </TextBlock>
                                </StackPanel>
                            </DataTemplate>
                        </DataGridTemplateColumn.CellTemplate>
                    </DataGridTemplateColumn>

                    <!-- Columna de Acciones -->
                    <DataGridTemplateColumn Header="Acciones" Width="120">
                        <DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                                    <!-- Botón Editar -->
                                    <Button ToolTip="Editar" 
                            Click="btnEditar_Click"
                            Style="{StaticResource MaterialDesignIconButton}"
                            Margin="2,0">
                                        <materialDesign:PackIcon Kind="Pencil"/>
                                    </Button>

                                    <!-- Botón Activar/Desactivar -->
                                    <Button Click="btnCambiarEstado_Click" Margin="2,0">
                                        <Button.Style>
                                            <Style TargetType="Button" BasedOn="{StaticResource MaterialDesignIconButton}">
                                                <Style.Triggers>
                                                    <DataTrigger Binding="{Binding Activo}" Value="True">
                                                        <Setter Property="ToolTip" Value="Desactivar cliente"/>
                                                    </DataTrigger>
                                                    <DataTrigger Binding="{Binding Activo}" Value="False">
                                                        <Setter Property="ToolTip" Value="Activar cliente"/>
                                                    </DataTrigger>
                                                </Style.Triggers>
                                            </Style>
                                        </Button.Style>

                                        <materialDesign:PackIcon>
                                            <materialDesign:PackIcon.Style>
                                                <Style TargetType="materialDesign:PackIcon">
                                                    <Style.Triggers>
                                                        <DataTrigger Binding="{Binding Activo}" Value="True">
                                                            <Setter Property="Kind" Value="PowerOff"/>
                                                            <Setter Property="Foreground" Value="#F44336"/>
                                                        </DataTrigger>
                                                        <DataTrigger Binding="{Binding Activo}" Value="False">
                                                            <Setter Property="Kind" Value="PowerOn"/>
                                                            <Setter Property="Foreground" Value="#4CAF50"/>
                                                        </DataTrigger>
                                                    </Style.Triggers>
                                                </Style>
                                            </materialDesign:PackIcon.Style>
                                        </materialDesign:PackIcon>
                                    </Button>
                                </StackPanel>
                            </DataTemplate>
                        </DataGridTemplateColumn.CellTemplate>
                    </DataGridTemplateColumn>
                </DataGrid.Columns>
            </DataGrid>
        </Border>
    </Grid>
</UserControl>